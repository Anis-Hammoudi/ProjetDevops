---
# =============================================================================
# PLAYBOOK PRINCIPAL - Deploiement GLPI sur Docker Swarm
# =============================================================================
# Execute via WSL : ansible-playbook playbooks/site.yml
# =============================================================================

- name: Configuration commune et installation Docker
  hosts: swarm
  become: true
  roles:
    - common
    - docker

- name: Initialisation du Swarm Manager
  hosts: managers
  become: true
  roles:
    - swarm-manager

- name: Jonction des Workers au Swarm
  hosts: workers
  become: true
  roles:
    - swarm-worker

- name: Deploiement de la stack GLPI
  hosts: managers
  become: true
  roles:
    - deploy-stack
